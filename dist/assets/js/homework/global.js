define(["components/domReady","components/flexbox_fallback","components/placeholders.min","components/magnific"],function(a,e,n,t,o){var i={megamenu:function(){function e(){$(".navbar-menu .navbar-menu__dropdown a.active").removeClass("active"),$(".l-megamenu").removeClass("active").slideToggle()}$(".navbar-menu .navbar-menu__dropdown a").on("click",function(){var a=$(this).attr("id");return $(".l-megamenu__layer").css({display:"none"}),$("#megamenu-"+a).fadeIn(),$(".overlay").fadeIn(),$(this).hasClass("active")?($(this).removeClass("active"),$(".l-megamenu").removeClass("active").slideToggle(),$(".overlay").fadeOut()):($(".navbar-menu .navbar-menu__dropdown a.active").removeClass("active"),$(this).addClass("active"),$(".l-megamenu").hasClass("active")||$(".l-megamenu").slideToggle().addClass("active")),!1}),$(".overlay").on("click",function(){e(),$(this).fadeOut()}),$(".js-close-megamenu").on("click",function(){return $(".overlay").fadeOut(),e(),!1}),$('.l-megamenu__links a[href*="#"]').on("click",function(){var a=$(this).attr("href").split("#");if(a[0]==window.location.pathname)return $(".overlay").fadeOut(),e(),setTimeout(function(){i.scrollToID("#"+a[1])},400),!1});$(".js-contactItem").on("click",function(){if(-1<window.location.pathname.indexOf("/contact/"))return i.scrollToID("#form"),!1}),$(document).keyup(function(a){27==a.keyCode&&$(".navbar-menu .navbar-menu__dropdown a.active").length&&(e(),$(".overlay").fadeOut())})},magnific:function(){$("a.popup, .js-popup").on("click",function(){var a=$(this).attr("href"),e=a.substring(a.length-4,a.length),n=$(this).attr("title"),t=$(this).attr("class"),o=$(this).attr("data-inline-popup")||!1;return e=".jpg"==e||".gif"==e||".png"==e||"jpeg"==e?"image":o?"inline":"iframe",$.magnificPopup.open({items:{src:a},type:e,titleSrc:n,gallery:{enabled:!0,navigateByImgClick:!0},callbacks:{close:function(){if(-1<t.indexOf("js-scrollToContent")){var a=$(".main").offset().top;setTimeout(function(){$("html,body").animate({scrollTop:a},600)},300)}}}}),!1})},searchbar:function(){function e(){$(".search .layout3").fadeOut(0),$(".search").fadeOut(0),$("html").removeClass("no-scrollbar")}$(".js-open-searchbar").on("click",function(){return $(".search").fadeIn(0),$(".search .layout3").fadeIn(),$("html").addClass("no-scrollbar"),$(".search input").focus(),!1}),$(".search .btn-close").on("click",function(){e()}),$(document).keyup(function(a){27==a.keyCode&&e()})},burger_menu:function(){$(".l-navbar__burger").on("click",function(){$(".navbar-menu").toggleClass("active")})},fallbacks:function(){var a=-1<navigator.userAgent.toLowerCase().indexOf("android"),e=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/);(a||e)&&($(".page-section--global-map, .page-section--network").addClass("page-section--no-fixed-bg"),$(".resources-list__group, .info-box, .info-box__blue > div").addClass("fallback_no-flexbox"))},sticky_submenu:function(){var n=$(window),t=$(".inner-page__submenu--sticky"),o=$(".inner-page__container"),i=0,r=0,s=50;function a(){var a=o.offset().top+o.height()-t.height()-2*parseInt(t.css("top")),e=o.offset().top;t.attr("data-min",e).attr("data-max",a),i=e-s,r=a+t.height()+s}function e(){var a=n.scrollTop();if(a>=t.attr("data-min")&&a<=t.attr("data-max")){var e=n.scrollTop()-t.attr("data-min");t.css("margin-top",e)}else a<=t.attr("data-min")?t.css("margin-top",0):a>t.attr("data-max")&&t.css("margin-top",t.attr("data-max")-t.attr("data-min")+"px")}a(),n.bind("scroll",function(){n.scrollTop()>=i&&n.scrollTop()<r&&(a(),e())}),e()},scrollToID:function(a){if(-1==window.location.pathname.indexOf("/resources/")){var e=$(a).offset().top-65;$("html,body").animate({scrollTop:e},500)}},hash_urls:function(){a(function(){window.location.hash&&setTimeout(function(){var a=window.location.hash;i.scrollToID(a)},500)})},marketo_popup:function(){$(".marketo-popup").magnificPopup({type:"ajax",overflowY:"scroll"})},social_media_share:function(){var a=navigator.userAgent.toLowerCase();(a.match(/(iphone|ipod|ipad)/)||a.match(/(android)/)||a.match(/(iemobile)/)||a.match(/iphone/i)||a.match(/ipad/i)||a.match(/ipod/i)||a.match(/blackberry/i)||a.match(/bada/i))&&$(".social-media--share ul").css({top:"-70px"})},animations:function(){var a=document.querySelectorAll(".animation");0!==a.length&&[].forEach.call(a,function(a){var e=a.dataset.animationFile;bodymovin.loadAnimation({wrapper:a,animType:"svg",loop:!0,path:e})})},ctaAds:function(){var e=document.getElementById("js-cta-ad");e&&$.ajax({url:"/cta-ad.html",type:"GET"}).then(function(a){e.innerHTML=a})},paymentForms:function(){var a=document.getElementById("payment-form");if(a){var n=Stripe("pk_test_6pRNASCoBOKtIshFeQd4XMUh"),t=n.elements().create("iban",{style:{base:{color:"#32325d",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"},":-webkit-autofill":{color:"#32325d"}},invalid:{color:"#fa755a",iconColor:"#fa755a",":-webkit-autofill":{color:"#fa755a"}}},supportedCountries:["SEPA"]});t.mount("#iban-element");var o=document.getElementById("error-message"),e=document.getElementById("bank-name");t.on("change",function(a){a.error?(o.textContent=a.error.message,o.classList.add("visible")):o.classList.remove("visible"),a.bankName?(e.textContent=a.bankName,e.classList.add("visible")):e.classList.remove("visible")}),a.addEventListener("submit",function(a){a.preventDefault(),showLoading();var e={type:"sepa_debit",currency:"eur",owner:{name:document.querySelector('input[name="name"]').value,email:document.querySelector('input[name="email"]').value},mandate:{notification_method:"email"}};n.createSource(t,e).then(function(a){a.error?(o.textContent=a.error.message,o.classList.add("visible"),stopLoading()):(o.classList.remove("visible"),stripeSourceHandler(a.source))})})}}};return{init:function(){i.megamenu(),i.searchbar(),i.magnific(),i.burger_menu(),i.fallbacks(),i.marketo_popup(),i.social_media_share(),i.paymentForms(),i.animations(),i.ctaAds(),$(".inner-page__submenu--sticky").length&&i.sticky_submenu(),i.hash_urls(),$('a[rel="external"]').attr("target","_blank"),$(".page-col__contact-btn .btn").on("click",function(){return i.scrollToID("#map"),!1}),$(".btn").wrapInner("<span />")}}});